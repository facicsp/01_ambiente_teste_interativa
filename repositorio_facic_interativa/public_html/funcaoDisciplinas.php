<?php function sqlDisciplina($idProfessor, $semestre) { $sql = "SELECT idDisciplina, disciplina, disciplina.idTurma, turma.turma FROM disciplina, turma WHERE disciplina.semestre = '$semestre' AND disciplina.idTurma = turma.idTurma AND (idProfessor = '$idProfessor' OR idDisciplina IN (SELECT idDisciplina FROM relacao_professor_auxiliar WHERE idProfessor = '$idProfessor')) ORDER BY turma.turma, disciplina.disciplina"; return $sql; } function sqlTurma($idProfessor, $semestre) { $sql = "SELECT * FROM turma WHERE idTurma IN ( SELECT disciplina.idTurma FROM disciplina WHERE disciplina.idProfessor = '$idProfessor' OR disciplina.idDisciplina IN (SELECT idDisciplina FROM relacao_professor_auxiliar WHERE idProfessor = '$idProfessor') ) AND semestre = '$semestre'"; return $sql; } function disciplinasProfessor($idProfessor, $semestre) { $sql = "SELECT idDisciplina, disciplina, disciplina.idTurma, turma.turma FROM disciplina, turma WHERE disciplina.semestre = '$semestre' AND disciplina.idTurma = turma.idTurma AND (idProfessor = '$idProfessor' OR idDisciplina IN (SELECT idDisciplina FROM relacao_professor_auxiliar WHERE idProfessor = '$idProfessor'))"; $result = mysql_query($sql); $disciplinas = array(); while ($row = mysql_fetch_array($result, MYSQL_NUM)) $disciplinas[] = $row; return $disciplinas; }